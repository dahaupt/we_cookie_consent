{"version":3,"sources":["ConsentApp.js"],"names":["ConsentApp","window","push","event","service","variable","trigger","checkConsentOptIn","consent","$parentElement","$element","$","createConsentOptInContainer","klaro","klaroConfig"],"mappings":"mJAAA,GAAMA,CAAAA,UAAU,CAAG,GAAI,WAAY,CAE/BC,MAAM,CAANA,SAAAA,CAAmBA,MAAM,CAANA,SAAAA,EAAnBA,EAF+B,CAanBA,KAAAA,cAAAA,CAAiBC,SAAAA,CAAAA,CAAAA,CAAAA,CAAjB,CACIC,KAAAA,CADJ,EAAA,CAEKC,CAAAA,GAAAA,CAAYC,CAAZD,IAAAA,CAAAA,OAAAA,CAAAA,2BAAAA,CAFL,EAIHH,MAAA,CAAAA,SAAAA,CAAAA,IAAAA,CAAAA,eAAAA,CAAAA,CACJE,KAAA,CAAAC,CAAA,CAAAA,GAAAA,CAAAE,OADIL,CAAAA,CAFQG,CAAO,CAAPA,GAAAA,CAERH,QAAAA,IAAAA,CAJG,CAHZ,UAAA,QAAAA,CAAAA,MAAA,CAAAG,CAAA,CAAA,WAAA,CAGY,CASJH,MAAM,CAACG,CAAO,CAAdH,WAAM,CAANA,CAAAA,CAAAA,CAAAA,CAAAA,CATI,CAuBPM,EAAAA,GAAAA,CAAL,CAAKA,WAvBO,EAwBHC,OAAS,CAATA,KAAAA,CAAS,yBAAAJ,CAAA,CAAA,WAAA,CAATI,8CAAAA,CAxBGP,CAbmB,CAkD1B,KAAA,iBAAA,CAAM,SAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CACHQ,CADG,EACHA,CAAc,CAAdA,IAAAA,CAAAA,iBAAAA,EAAAA,MAAAA,EADG,CAEHC,CAAQ,CAARA,IAAAA,EAFG,GAEHA,CAAA,CAAAA,IAAAA,EAFG,CAGND,CAAA,CAAAA,OAAAA,CAAA,KAAA,2BAAA,CAAAA,CAAA,CAAAA,CAHM,CATHE,CAAC,CAAC,uBAAwBP,CAAO,CAA/B,IAAA,CAAFO,KAAC,CAADA,CAAAA,KAAAA,CAAqD,UAAY,CAqBpEC,KAAAA,CAAAA,UAAAA,GAAAA,aAAAA,CAAwCR,CAAS,CAAjDQ,IAAAA,IArBoE,CAqBzED,CAAA,CAAA,6BAAAP,CAAA,CAAA,IAAA,CAAAO,KAAA,CAAAA,CAAAA,EAAAA,CAAA,UAAAA,CArByE,CAzC7EE,KAAA,CAAAA,UAAAA,GAAAA,oBAAAA,EAyC6E,CAMzDA,KAAK,CAALA,UAAAA,GAAAA,aAAAA,EANRF,CAAAA,CASG,CAAN,CAlD0B,CA8D/B,KAAA,2BAAA,CAAmC,SAAA,CAAA,CAAmB,CAClD,MAAA,uBAAA,MAAA,CAA6BP,CAAO,CAApC,IAAA,CAAA,8DAAA,EAAA,MAAA,CACsBA,CAAO,CAD7B,KAAA,CAAA,oBAAA,EAAA,MAAA,CAEMA,CAAO,CAFb,SAAA,CAAA,sEAAA,EAAA,MAAA,CAGyDA,CAAO,CAHhE,IAAA,CAAA,KAAA,EAAA,MAAA,CAG0EU,WAAW,CAAXA,YAAAA,CAAAA,EAAAA,CAH1E,QAAA,CAAA,gGAAA,EAAA,MAAA,CAKkCV,CAAO,CALzC,IAAA,CAAA,sEAAA,EAAA,MAAA,CAK+GA,CAAO,CALtH,IAAA,CAAA,yDAAA,EAAA,MAAA,CAMmCA,CAAO,CAN1C,IAAA,CAAA,gCAAA,EAAA,MAAA,CAM6EU,WAAW,CAAXA,YAAAA,CAAAA,EAAAA,CAN7E,cAAA,CAAA,gDAAA,CADJ,CA9DJ,CAAA","file":"ConsentApp.js","sourcesContent":["const ConsentApp = new function () {\n    //-- global variables ---\n    window.dataLayer = window.dataLayer || [];\n\n    //--- public functions ---\n    /**\n     * Callback function for GoogleTagManager Script to fire the dataLayer trigger\n     * @param consent\n     * @param service\n     */\n    this.consentChanged = function (consent, service) {\n        if (consent === true) {\n            if (service.name.indexOf('google-tagmanager-service') !== -1) {\n                window.dataLayer.push({\n                    event: service.gtm.trigger,\n                    [service.gtm.variable]: true\n                });\n            }\n        }\n\n        //Check if the own callback function is allready defined\n        if (typeof window[service.ownCallback] === \"function\") {\n            window[service.ownCallback](consent, service);\n        } else if (service.ownCallback !== '') {\n            console.error('The Callback function ' + service.ownCallback + ' is not yet defined. Please create it first.');\n        }\n    };\n\n    /**\n     * Evaluates the consent and initiates all further opt-in modifications.\n     *\n     * @param consent\n     * @param service\n     * @param $element\n     * @param $parentElement\n     */\n    this.checkConsentOptIn = function (consent, service, $element, $parentElement) {\n        if (!consent) {\n            $element.hide();\n            $parentElement.prepend(this.createConsentOptInContainer(service));\n\n            $('button[data-optin=\"' + service.name + '\"]').click(function () {\n                klaro.getManager().updateConsent(service.name, true);\n\n                if ($('input[data-optin-always=\"' + service.name + '\"]').is(':checked')) {\n                    klaro.getManager().saveAndApplyConsents();\n                } else {\n                    klaro.getManager().applyConsents();\n                }\n            });\n        } else {\n            $parentElement.find('.service-opt-in').remove();\n            $element.show();\n        }\n    };\n\n    /**\n     * Creates a service opt-in container based on the provided service.\n     *\n     * @param service\n     * @returns {string}\n     */\n    this.createConsentOptInContainer = function (service) {\n        return `<div data-service=\"${service.name}\" class=\"service-opt-in\">\n            <p class=\"lead\">${service.title}</p>\n            ${service.optInText}\n            <button class=\"btn btn-primary btn-sm\" data-optin=\"${service.name}\">${klaroConfig.translations.en.activate}</button>\n              <div class=\"form-check\">\n                <input id=\"optin-always-${service.name}\" type=\"checkbox\" class=\"form-check-input\" data-optin-always=\"${service.name}\" checked>\n                <label for=\"optin-always-${service.name}\" class=\"form-check-label\">${klaroConfig.translations.en.activateAlways}</label>\n            </div>\n          </div>`;\n    };\n};\n"]}